<!--
  This template loads for the 'tab.friend-detail' state (app.js)
  'friend' is a $scope variable created in the FriendsCtrl controller (controllers.js)
  The FriendsCtrl pulls data from the Friends service (service.js)
  The Friends service returns an array of friend data
-->
<ion-view view-title="{{ActualUser.name}}">
    <ion-content class="has-header has-footer" delegate-handler="chat-scroll">
        <ion-list>
            <div class="chatBubble">
                    <ion-item ng-repeat="item in mensajeria.messageLog" ng-if='item.from == ActualUser.email || item.to == ActualUser.email'>
                        <div class="chatBubble">
                            <span class="profile-pic" ng-class="{'left':item.from == ActualUser.email,'right':item.to == ActualUser.email}">
                                <img ng-src='{{ActualUser.image}}' ng-if="ActualUser.email==item.from && ActualUser.image">
                                <img ng-if="$root.user.email==item.from && $root.user.image" ng-src="{{$root.user.image}}">
                                <i class="icon ion-person" ng-if="(ActualUser.email==item.from && !ActualUser.image) || ($root.user.email==item.from && !$root.user.image)"></i>
                            </span>
                            <div class="chat-bubble" ng-class="{'left':item.from == ActualUser.email,'right':item.to == ActualUser.email}">
                                <div class="message">{{item.message}}</div>
                                <div class="message-detail">
                                    <span style="font-weight:bold;">{{item.from}} </span>,
                                    <span>{{item.date}}</span>
                                </div>
                            </div>
                        </div>
                    </ion-item>
            </div>
                </ion-list>
    </ion-content>
    <div class="bar bar-footer chatPageFooter">
            <ion-item>
                    <textarea msd-elastic  placeholder="Type to compose" ng-model='mensajeria.message'  focus></textarea>
            </ion-item>
            <div class="buttons right">
                <i ng-click="sendMessage(message, ActualUser.email)" class="icon ion-android-send"></i>
            </div>
    </div>
    <!--    <div class='row'>
          <div class='col-xs-12'>
            <form role='form' class='form-inline' novalidate name='form'>
              <div class='form-group col-xs-10'>
                  <input class="form-control" type='text' style='width: 80%' 
                required
                ng-max='50' 
                ng-model='mensajeria.message' 
                focus>
              </div>
              <div class='form-group col-xs-2'>
                <button class='btn btn-sm btn-primary' 
                  ng-enable='form.$valid'
                  ng-click="sendMessage(message,ActualUser.email)">Send!</button>
              </div>
            </form>
          </div>
        </div>-->
</ion-view>
